### RCE远程代码执行

#### 一.什么是RCE漏洞

##### 1)RCE漏洞

RCE(任意命令注入，远程代码执行，远程命令执行，命令执行漏洞)允许攻击者在系统上执行恶意代码，通常是通过利用应用程序或系统中的安全漏洞实现的。

当一个应用程序或系统受到RCE漏洞的影响时，攻击者可以利用该漏洞向受影响的系统发送特定的请求或输入，从而在目标系统上执行任意代码。这种攻击可以使攻击者获得系统管理员权限，控制整个系统，并访问敏感数据、修改系统配置或执行其他恶意操作。

##### 2)为什么要远程执行代码

<1>路由器、防火墙、入侵检测等设备的web管理界面
<2>自动化运维的管理系统

##### 3)远程代码执行

<1>远程代码执行：Remote Code Execute

 <2>远程命令执行：Remote Command Exe

##### 4)本地命令执行



#### 二.RCE漏洞的原理

RCE漏洞通常是由于应用程序或系统中的输入验证不足、安全配置错误或者未经授权的功能等引起的。攻击者可以利用这些漏洞通过远程方式执行任意的系统命令或代码。

#### 三.RCE漏洞的危害

1)获取服务器权限
2)获取敏感数据文件
3)写入恶意文件getshell
4)植入木马病毒勒索软件等

#### 四.RCE漏洞案例分析



#### 五.构建payload

##### 1)php相关函数：

###### <1>命令command注入

![image-20240327111810119](C:\Users\wlen\AppData\Roaming\Typora\typora-user-images\image-20240327111810119.png)

###### <2>代码code注入

![image-20240327111829506](C:\Users\wlen\AppData\Roaming\Typora\typora-user-images\image-20240327111829506.png)

##### 2)常用的拼接命令：

###### <1>windows系统：

![image-20240327154937792](C:\Users\wlen\AppData\Roaming\Typora\typora-user-images\image-20240327154937792.png)

##### <2>linux系统：

![image-20240327155023387](C:\Users\wlen\AppData\Roaming\Typora\typora-user-images\image-20240327155023387.png)

#### 六.RCE漏洞的挖掘



#### 七.RCE漏洞的绕过姿势



#### 八.RCE漏洞的防御

1)尽量不要使用命令执行的函数

2)如果必须使用，需要做白名单处理

3)用正则表达式对用户输入的内容进行处理

4)使用WAF

5)开源框架升级到最新版本